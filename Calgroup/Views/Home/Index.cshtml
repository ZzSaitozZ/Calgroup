@{
    ViewBag.Title = "Trang chủ";
}
@model Calgroup.VM.SanPhamPageVM
@using Calgroup.Resources.Common;

@{
    var news = (List< Post>)ViewBag.news;
}
<style>
    .Item {
        cursor: pointer;
    }

    .ItemSP {
        cursor: pointer;
    }
</style>
<div id="carouselTitle" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#carouselTitle" data-slide-to="0" class="active"></li>
        <li data-target="#carouselTitle" data-slide-to="1"></li>
        <li data-target="#carouselTitle" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner" role="listbox">
        <div class="carousel-item active">
            <img class="Baner-img" src="~/Resources/Images/Banners/home-banner-1.png" />
            <div class="carousel-caption d-none d-md-block Caroselfix1">
            </div>
        </div>
        <div class="carousel-item">
            <img class="Baner-img" src="~/Resources/Images/Banners/home-banner-2.png" />
            <div class="carousel-caption d-none d-md-block Caroselfix2">
            </div>
        </div>
        <div class="carousel-item">
            <img class="Baner-img" src="~/Resources/Images/Banners/home-banner-3.png" />
            <div class="carousel-caption d-none d-md-block Caroselfix3">
            </div>
        </div>
    </div>
    <a class="carousel-control-prev CaroselBtn" href="#carouselTitle" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next CaroselBtn" href="#carouselTitle" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>
<div class="Certificate">
    <h2>Phạm vi công nhận</h2>
    <div class="row justify-content-center" style="margin:3% 0% 3% 0%" id="CC">

    </div>

</div>
<div class="CategoryChoice" style="margin-top:4%">
    <h2>Lĩnh vực hiệu chuẩn</h2>
    <div class="row justify-content-around" style="margin:unset;padding:unset">
        <div class="col-md-4">
            <div class="Service" style="cursor:pointer">
                <img class="img-fluid row1son" src="~/Resources/Images/Banners/Hiệu chuẩn kích thước - Dimensional Calibration.png" />
                <h4 class="Services">Lĩnh vực kích thước - cơ khí chính xác</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid row1son" src="~/Resources/Images/Banners/Hiệu chuẩn điện - Electronic Calibration.png" />
                <h4 class="Services line">Lĩnh vực điện - tần số</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid" src="~/Resources/Images/Banners/Hiệu chuẩn nhiệt động học - Thermodynamic Calibration.png" id="row1" />
                <h4 class="Services">Lĩnh vực nhiệt - nhiệt & nhiệt ẩm</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid" src="~/Resources/Images/Banners/Hiệu chuẩn lực - Force Calibration.png" />
                <h4 class="Services line">Lĩnh vực lực - độ cứng</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid" src="~/Resources/Images/Banners/Hiệu chuẩn khối lượng - Calibration Weights.png" />
                <h4 class="Services line">Lĩnh vực khối lượng</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid" src="~/Resources/Images/Banners/Hiệu chuẩn áp suất - Pressure Calibration.png" />
                <h4 class="Services line">Lĩnh vực áp suất</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid row3son" src="~/Resources/Images/Banners/Hiệu chuẩn hóa lý - Chemical Calibration.png" />
                <h4 class="Services line">Lĩnh vực hoá lý - thể tích</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid" id="row3" src="~/Resources/Images/Banners/Hiệu chuẩn khác - Other Calibration.png" />
                <h4 class="Services line">Lĩnh vực khác</h4>
            </div>
        </div>
        <div class="col-md-4" style="cursor:pointer">
            <div class="Service">
                <img class="img-fluid row3son" src="~/Resources/Images/Banners/Tận nơi.jpg" />
                <h4 class="Services">Hiệu chuẩn và sửa chữa thiết bị tận nơi</h4>
            </div>
        </div>
    </div>
</div>
<div class="CategoryChoice" style=" margin-top:4%">
    <div id="P-card-container">
        <h2 id="P-Category"></h2>
        <div id="P-card-subcontainer" class="row" style="margin:1% 0% 3% 0%">

        </div>

    </div>
    <ul class="pagination justify-content-center" style="font-size:18px;"></ul>
</div>
<hr style="border: 0; height: 1px; background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));" />
<h2 style="text-align:center;color:#0075bf;margin-top:1%">Tin tức</h2>
<div id="P-card-container">
    <div class="row mb-2 justify-content-around" style="padding-top:10px; margin:unset">

        @foreach (var i in news.Take(4))
        {
            var link = "/News/" + @i.Alias + "-" + @i.ID;
            <div class="col-md-5 card" style="margin:10px 0px 10px 0px; padding:unset">
                <div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 text-center">
                                <img src=@i.Image style="width:100%;height:100%;max-height:167px">
                            </div>
                            <div class="col-md-8">
                                <div class="news-title">
                                    <a href=@link><h5>@i.Name</h5></a>
                                </div>
                                <div class="news-cats">
                                    <ul class="list-unstyled list-inline mb-1">
                                        <li class="list-inline-item">
                                            <i class="fa fa-folder-open text-danger"></i>
                                            <small>@i.ViewCount</small>
                                        </li>
                                        <li class="list-inline-item">
                                            <i class="fa fa-folder-open text-danger"></i>
                                            <small>@i.CreatedDate</small>
                                        </li>
                                    </ul>
                                </div>
                                <div class="news-content">
                                    <p>  @Html.Raw(StringHelper.ShortArticle(i.Description, 19))</p>
                                </div>
                                <div class="news-buttons">

                                    <a href=@link class="btn btn-outline-danger btn-sm">Read More</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

</div>
<script>
    var page = [];
    function LoadData_SP() {
        $.ajax({
            type: 'Post',
            url: '/getSanPham',
            dataType: 'json',
            data: { aliascat: null },
            success: function (data) {
                var content = ''; var Count = 0;
                if (data.Products != null) {
                    data.Products = JSON.parse(data.Products);
                    for (var i = 0; i < data.Products.length; i++) {
                        content += '<div class="col-md-6 col-lg-6 col-xl-4 " style="margin-bottom:20px">' +
                            '<div class="Item" data-alias="' + data.Products[i].Alias + '">' +
                            '<img class="img-fluid" src="' + data.Products[i].ImageLink + '" />' +
                            '<h4>' + data.Products[i].Name + '</h4>' +
                            '<ul>' +
                            '<li>' + data.Products[i].Category + '</li>' +
                            '<li>' + data.Products[i].Model + '</li>' +
                            '<li>' + data.Products[i].Manufacturer + '</li>' +
                            '</ul>' +
                            '</div>' +
                            '</div>';
                        Count++;
                        if (Count == 6 || i == data.Products.length - 1) {
                            page.push(content);
                            content = '';
                            Count = 0;
                        }
                    }
                    $('#P-card-subcontainer').append(page[0]);
                    if (page.length > 1) {
                        for (let x = 0; x < page.length; x++) {
                            let pagecontent = '<li class="page-item" data-page="' + (x + 1) + '"><a class="page-link" href="#">' + (x + 1) + '</a></li>';
                            $('ul.pagination').append(pagecontent);
                            $('.pagination li').first().addClass('active');
                        }
                        $('.pagination li').click(function (event) {
                            event.preventDefault();
                            if (!$(this).hasClass('active')) {
                                $('.pagination li.active').removeClass('active');
                                $(this).addClass('active');
                                $('#P-card-subcontainer').empty();
                                $('#P-card-subcontainer').append(page[$(this)[0].dataset.page - 1]);
                                $('.Item').click(function () {
                                    window.location.href = '/ChiTiet/' + $(this)[0].dataset.alias;
                                });
                            }
                        });
                    };
                    $('.Item').click(function () {
                        var win = window.open('/ChiTiet/' + $(this)[0].dataset.alias, '_blank');
                        win.focus();
                    });
                }
                $('#P-Category').html('' + data.CategoryVi);
            }
        });
    }
    function LoadData_CC() {
        $.ajax({
            type: 'Post',
            url: '/getThuVien',
            dataType: 'json',
            data: { aliascat: 'chung-chi', page: 1 },
            success: function (data) {
                var content = '';
                if (data.Products != null) {
                    data.Products = JSON.parse(data.Products);
                    for (var i = 0; i < data.Products.length; i++) {
                        content += '<div class="col-md-6 col-lg-6 col-xl-2 " style="margin-bottom:20px" >' +
                            '<div class="ItemSP" href="' + data.Products[i].PDF + '">' +
                            '<img class="img-fluid" src="' + data.Products[i].Image + '" />' +
                            '<h5>' + data.Products[i].Name + '</h5>' +
                            '</div>' + '</div>'

                        if (i == data.Products.length - 1) {
                            $('#CC').html(content);
                            content = '';
                        }

                    }
                };
                $('.ItemSP').click(function () {
                    window.location.href = $(this).attr('href')
                });
            }
        });
    }
    $(window).ready(function () {
        LoadData_SP();
        LoadData_CC();
    });
    $('.Service').click(function () {
        window.location.href = '/Calibration'
    });
</script>
